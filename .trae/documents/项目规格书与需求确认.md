# 开发实施计划 (Development Implementation Plan)

鉴于您已确认方案（自行处理浏览器安全策略 + 本地 MongoDB + 预设账号），我将按照以下步骤进行开发。

## 1. 项目初始化 (Project Setup)
*   **动作**：创建一个轻量级的 Next.js 项目。
*   **依赖**：
    *   `next`, `react`, `react-dom` (核心框架)
    *   `mongoose` (连接本地 MongoDB)
    *   `tailwindcss` (快速构建 UI)

## 2. 数据库层开发 (Database Layer)
*   **配置**：建立与 `mongodb://localhost:27017/ai-workflow` 的连接。
*   **Schema**：定义 `ImageResult` 模型，包含字段：
    *   `originalText` (原始输入)
    *   `prompt` (豆包生成的提示词)
    *   `imageUrl` (Liblib 生成的图片链接)
    *   `createdAt` (时间)
*   **API**：创建 `/api/save` 接口用于前端写入数据。

## 3. 前端界面开发 (Frontend UI)
*   **主布局**：左右分屏。
    *   **左侧**：控制台。
        *   `SourceTextArea`: 原始清单输入。
        *   `PrefixInput`: 豆包提示词前缀输入 (如 "请将以下内容转为...").
        *   `TaskStatus`: 动态显示当前执行到第几行，以及当前步骤（请求豆包中/等待生图中）。
        *   `ResultGallery`: 实时回显入库的图片。
    *   **右侧**：Iframe 容器。
        *   两个 `iframe` 标签，分别加载豆包和 Liblib。

## 4. 自动化逻辑核心 (Automation Core)
这是最关键的部分。由于我看不到您当前浏览器中豆包/Liblib 的实时 DOM 结构，我将编写**基于通用选择器的逻辑，并提供配置入口**。

*   **Doubao 适配器**：
    *   寻找输入框 (`textarea` / `[contenteditable]`)。
    *   模拟输入 + 点击发送。
    *   监听回复区域的变化，提取最新一条文本。
*   **Liblib 适配器**：
    *   寻找 Prompt 输入框。
    *   模拟填入 + 点击"生成"按钮。
    *   轮询检测图片结果区域，提取 `src`。

## 5. 使用说明 (User Guide)
开发完成后，我会生成一份 `README`，重点说明：
*   **如何启动 Chrome**：提供具体的命令行参数 (`--disable-web-security --user-data-dir=...`) 以确保 iframe 跨域控制生效。
*   **如何运行项目**：`npm run dev`。

---

**准备开始编码...**